"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["src_app_pages_auth_auth_module_ts"],{7776:(y,p,r)=>{r.r(p),r.d(p,{AuthPageModule:()=>G});var g=r(6362),o=r(587),i=r(3444),d=r(5513),c=r(4929),A=r(460),t=r(6723),m=r(7503),h=r(5211);function _(n,l){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-label",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.isSignup=!a.isSignup}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-label",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetPassword()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.BQk()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"AUTH_PAGE.signup")," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"AUTH_PAGE.passwordReset")," "))}function f(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"ion-label",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.isSignup=!a.isSignup}),t._UZ(1,"ion-icon",12),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"AUTH_PAGE.backToLogin")," "))}function P(n,l){1&n&&(t.TgZ(0,"ion-card",0),t._UZ(1,"ion-card-content",13),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,"AUTH_PAGE.beeNotesDescription"),t.oJD))}const T=[{path:"",component:(()=>{class n{constructor(e,s,a,u,v){this.authService=e,this.router=s,this.loadingCtrl=a,this.alertController=u,this.translate=v,this.isSignup=!1,this.isLoading=!1}ngOnInit(){this.loginForm=new o.cw({email:new o.NI("",[o.kI.required,o.kI.email]),password:new o.NI("",[o.kI.required])}),A.K.get({key:"lastEmailAddress"}).then(e=>{e&&e.value&&this.loginForm.get("email").setValue(e.value)})}onLogin(){!this.loginForm.valid||(A.K.set({key:"lastEmailAddress",value:this.loginForm.value.email}),this.isLoading=!0,this.loadingCtrl.create({keyboardClose:!0,message:this.translate.instant(this.isSignup?"AUTH_PAGE.signupSpinner":"AUTH_PAGE.loginSpinner")}).then(e=>{e.present();const s=this.loginForm.value.email,a=this.loginForm.value.password;this.isSignup?this.authService.signup(s,a).then(()=>{e.dismiss(),this.onSignupSuccess(),this.isSignup=!1}).catch(u=>{e.dismiss(),this.onSignupFailed(u)}):this.authService.login(s,a).then(()=>{e.dismiss(),this.router.navigateByUrl("/swarms")}).catch(u=>{this.isLoading=!1,e.dismiss(),this.onLoginFailed(u)})}))}resetPassword(){return(0,c.mG)(this,void 0,void 0,function*(){const e=this.loginForm.controls.email.value.trim();e.length>4&&e.indexOf("@")>0?yield(yield this.alertController.create({header:this.translate.instant("AUTH_PAGE.passwordReset"),message:this.translate.instant("AUTH_PAGE.passwordResetPrompt",{address:e}),buttons:[{text:this.translate.instant("GENERAL.cancel"),role:"cancel",cssClass:"secondary"},{text:this.translate.instant("GENERAL.yes"),cssClass:"secondary",handler:()=>{this.authService.resetPassword(e).then(()=>{this.onResetLinkSent()}).catch(u=>{this.onResetLinkFailure(u)})}}]})).present():this.onMailAddressIncomplete()})}onLoginFailed(e=null){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("AUTH_PAGE.loginFailed"),message:e||this.translate.instant("AUTH_PAGE.credentialsFailed"),buttons:["OK"]})).present()})}onSignupFailed(e){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("AUTH_PAGE.signupFailed"),message:e,buttons:["OK"]})).present()})}onSignupSuccess(){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("AUTH_PAGE.signupSuccess"),message:this.translate.instant("AUTH_PAGE.signupSuccessText"),buttons:["OK"]})).present()})}onMailAddressIncomplete(){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("AUTH_PAGE.noEmailAddress"),message:this.translate.instant("AUTH_PAGE.noEmailAddressText"),buttons:["OK"]})).present()})}onResetLinkSent(){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("AUTH_PAGE.resetLinkSent"),message:this.translate.instant("AUTH_PAGE.resetLinkSentText"),buttons:["OK"]})).present()})}onResetLinkFailure(e){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("AUTH_PAGE.resetLinkFailure"),message:this.translate.instant("AUTH_PAGE.resetLinkFailureText")+e,buttons:["OK"]})).present()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.e),t.Y36(d.F0),t.Y36(i.HT),t.Y36(i.Br),t.Y36(h.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-auth"]],decls:34,vars:25,consts:[[1,"login-card"],["color","primary"],[3,"formGroup"],["mode","ios","position","stacked"],["data-test-id","email","formControlName","email","type","email",3,"placeholder"],["data-test-id","password","formControlName","password","type","password",3,"placeholder"],["type","submit","data-test-id","submit","color","primary","expand","block",3,"click"],[4,"ngIf"],["color","secondary","class","ion-float-left ion-padding",3,"click",4,"ngIf"],["class","login-card",4,"ngIf"],["color","secondary",1,"ion-float-left","ion-padding",3,"click"],["color","secondary",1,"ion-float-right","ion-padding",3,"click"],["name","arrow-undo-outline"],[3,"innerHTML"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-content")(1,"ion-card",0)(2,"ion-card-header")(3,"ion-card-subtitle"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"ion-card-title",1),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"form",2)(10,"ion-grid")(11,"ion-row")(12,"ion-col")(13,"ion-list")(14,"ion-item")(15,"ion-label",3),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"ion-input",4),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ion-item")(21,"ion-label",3),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"ion-input",5),t.ALo(25,"translate"),t.qZA()()()(),t.TgZ(26,"ion-row")(27,"ion-col")(28,"ion-button",6),t.NdJ("click",function(){return s.onLogin()}),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.YNc(31,_,7,6,"ng-container",7),t.YNc(32,f,4,3,"ion-label",8),t.qZA()()()()(),t.YNc(33,P,3,3,"ion-card",9),t.qZA()),2&e&&(t.xp6(4),t.hij("",t.lcZ(5,11,"AUTH_PAGE.welcome")," \u{1f41d}"),t.xp6(3),t.Oqu(t.lcZ(8,13,s.isSignup?"AUTH_PAGE.signup":"AUTH_PAGE.login")),t.xp6(2),t.Q6J("formGroup",s.loginForm),t.xp6(7),t.Oqu(t.lcZ(17,15,"AUTH_PAGE.email")),t.xp6(2),t.s9C("placeholder",t.lcZ(19,17,"AUTH_PAGE.emailPlaceholder")),t.xp6(4),t.Oqu(t.lcZ(23,19,"AUTH_PAGE.password")),t.xp6(2),t.s9C("placeholder",t.lcZ(25,21,"AUTH_PAGE.passwordPlaceholder")),t.xp6(5),t.hij(" ",t.lcZ(30,23,s.isSignup?"AUTH_PAGE.signup":"AUTH_PAGE.login"),""),t.xp6(2),t.Q6J("ngIf",!s.isSignup),t.xp6(1),t.Q6J("ngIf",s.isSignup),t.xp6(1),t.Q6J("ngIf",s.isSignup))},directives:[i.W2,i.PM,i.Zi,i.tO,i.Dq,o._Y,o.JL,o.sg,i.jY,i.Nd,i.wI,i.q_,i.Ie,i.Q$,i.pK,i.j9,o.JJ,o.u,i.YG,g.O5,i.gu,i.FN],pipes:[h.X$],styles:["ion-list[_ngcontent-%COMP%]{padding-top:0;padding-bottom:4px;border-radius:5px}input[type=password][_ngcontent-%COMP%]{background-color:#fff}input[type=password][_ngcontent-%COMP%]:focus{outline:0}"]}),n})()}];let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.Bz.forChild(T)],d.Bz]}),n})(),G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,o.UX,i.Pc,U,h.aw]]}),n})()}}]);
//# sourceMappingURL=src_app_pages_auth_auth_module_ts.294385621c3dcca6.js.map