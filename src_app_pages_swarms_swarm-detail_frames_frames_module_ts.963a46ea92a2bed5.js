"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["src_app_pages_swarms_swarm-detail_frames_frames_module_ts"],{9339:(bt,E,i)=>{i.r(E),i.d(E,{FramesPageModule:()=>Ft});var g=i(6362),F=i(587),s=i(3444),M=i(5513),b=i(4929),A=i(8567),D=i(8325),T=i(1170),R=i(1740),S={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"halbe Minute",withPreposition:"halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}};var w=i(4711);const j={date:(0,w.Z)({formats:{full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},defaultWidth:"full"}),time:(0,w.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,w.Z)({formats:{full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})};var U={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"};var p=i(7850),y={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},z={narrow:y.narrow,abbreviated:["Jan.","Feb.","M\xe4rz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:y.wide};const $={ordinalNumber:function(o){return Number(o)+"."},era:(0,p.Z)({values:{narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},defaultWidth:"wide"}),quarter:(0,p.Z)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},defaultWidth:"wide",argumentCallback:function(o){return o-1}}),month:(0,p.Z)({values:y,formattingValues:z,defaultWidth:"wide"}),day:(0,p.Z)({values:{narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},defaultWidth:"wide"}),dayPeriod:(0,p.Z)({values:{narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},defaultWidth:"wide",formattingValues:{narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},defaultFormattingWidth:"wide"})};var v=i(4094);const Z={code:"de",formatDistance:function(o,e,a){var r,c=null!=a&&a.addSuffix?S[o].withPreposition:S[o].standalone;return r="string"==typeof c?c:1===e?c.one:c.other.replace("{{count}}",String(e)),null!=a&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:"vor "+r:r},formatLong:j,formatRelative:function(o,e,a,r){return U[o]},localize:$,match:{ordinalNumber:(0,i(7002).Z)({matchPattern:/^(\d+)(\.)?/i,parsePattern:/\d+/i,valueCallback:function(o){return parseInt(o)}}),era:(0,v.Z)({matchPatterns:{narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^v/i,/^n/i]},defaultParseWidth:"any"}),quarter:(0,v.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(o){return o+1}}),month:(0,v.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(j[a\xe4]n|feb|m\xe4r[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|m\xe4rz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[a\xe4]/i,/^f/i,/^m\xe4r/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,v.Z)({matchPatterns:{narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,v.Z)({matchPatterns:{narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},defaultMatchWidth:"wide",parsePatterns:{any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var dt=i(4350),u=i(8079),t=i(6723),gt=i(9896),P=i(5211);function pt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-datetime",18,19),t.NdJ("ionChange",function(){t.CHM(e);const r=t.MAs(1);return t.oxw().setDate(r.value)}),t.qZA()}if(2&n){const e=t.oxw();t.s9C("max",e.maxDate),t.s9C("min",e.minDate)}}function vt(n,o){1&n&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FRAMES.noChange")," "))}function ft(n,o){if(1&n&&(t.TgZ(0,"strong"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.AsE("",e.value," ",t.lcZ(2,2,"FRAMES.added"),"")}}function Mt(n,o){if(1&n&&(t.TgZ(0,"strong"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.AsE("",-e.value," ",t.lcZ(2,2,"FRAMES.removed"),"")}}function At(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-icon",12),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().changeAmount(c.key,-1)}),t.qZA(),t.TgZ(2,"ion-label",13),t._uU(3),t.ALo(4,"translate"),t._UZ(5,"br"),t.YNc(6,vt,3,3,"span",14),t.YNc(7,ft,3,4,"strong",15),t.YNc(8,Mt,3,4,"strong",15),t.qZA(),t.TgZ(9,"ion-icon",16),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().changeAmount(c.key,1)}),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,4,e.key),""),t.xp6(3),t.Q6J("ngIf",0===e.value),t.xp6(1),t.Q6J("ngIf",e.value>0),t.xp6(1),t.Q6J("ngIf",e.value<0)}}function _t(n,o){1&n&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FRAMES.noChange")," "))}function wt(n,o){if(1&n&&(t.TgZ(0,"strong"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE("",e.storeyAmount," ",t.lcZ(2,2,"FRAMES.storeyAdded"),"")}}function yt(n,o){if(1&n&&(t.TgZ(0,"strong"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE("",-e.storeyAmount," ",t.lcZ(2,2,"FRAMES.storeyRemoved"),"")}}function Pt(n,o){1&n&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FRAMES.noHarvest")," "))}function Et(n,o){if(1&n&&(t.TgZ(0,"strong"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("",e.harvestAmount," kg")}}var h=(()=>{return(n=h||(h={})).DRONE="FRAMES.droneCombs",n.FOOD="FRAMES.foodCombs",n.EMPTY_COMBS="FRAMES.emptyCombs",n.EMPTY_PANELS="FRAMES.emptyPanels",n.BROOD="FRAMES.broodCombs",h;var n})();const _="yyyy-MM-dd",St=[{path:"",component:(()=>{class n{constructor(e,a,r,c,d){this.journalService=e,this.route=a,this.navCtrl=r,this.toastController=c,this.translate=d,this.amounts=new Map,this.date=(0,A.Z)(new Date,_,{locale:Z}),this.minDate=(0,A.Z)(function x(n){(0,T.Z)(1,arguments);var o=(0,D.Z)(n),e=new Date(0);return e.setFullYear(o.getFullYear(),0,1),e.setHours(0,0,0,0),e}((0,R.Z)(new Date,-1)),_),this.maxDate=(0,A.Z)(new Date,_),this.harvestAmount=0,this.storeyAmount=0}ngOnInit(){this.colonyId=this.route.snapshot.params.swarmId;for(const e in h)this.amounts.set(h[e],0)}changeAmount(e,a){this.amounts.set(e,this.amounts.get(e)+a)}changeHarvest(e){this.harvestAmount+e>=0&&(this.harvestAmount+=e)}changeStoreys(e){this.storeyAmount+e>=-3&&this.storeyAmount+e<=3&&(this.storeyAmount+=e)}save(){const e=[],a=this.amounts.get(h.BROOD);if(a){const m=a>0?u.U.FRAMES_BROOD_INSERTED:u.U.FRAMES_BROOD_REMOVED,l=this.journalService.createEntry(this.colonyId,{date:new Date(this.date),type:m,amount:a>0?a:-a});e.push(l)}const r=this.amounts.get(h.EMPTY_PANELS);if(r){const m=r>0?u.U.FRAMES_EMPTY_PANEL_INSERTED:u.U.FRAMES_EMPTY_PANEL_REMOVED,l=this.journalService.createEntry(this.colonyId,{date:new Date(this.date),type:m,amount:r>0?r:-r});e.push(l)}const c=this.amounts.get(h.EMPTY_COMBS);if(c){const m=c>0?u.U.FRAMES_EMPTY_COMBS_INSERTED:u.U.FRAMES_EMPTY_COMBS_REMOVED,l=this.journalService.createEntry(this.colonyId,{date:new Date(this.date),type:m,amount:c>0?c:-c});e.push(l)}const d=this.amounts.get(h.FOOD);if(d){const m=d>0?u.U.FRAMES_FOOD_INSERTED:u.U.FRAMES_FOOD_REMOVED,l=this.journalService.createEntry(this.colonyId,{date:new Date(this.date),type:m,amount:d>0?d:-d});e.push(l)}const f=this.amounts.get(h.DRONE);if(f){const m=f>0?u.U.FRAMES_DRONE_INSERTED:u.U.FRAMES_DRONE_REMOVED,l=this.journalService.createEntry(this.colonyId,{date:new Date(this.date),type:m,amount:f>0?f:-f});e.push(l)}if(this.harvestAmount){const m=u.U.FRAMES_HONEY_HARVESTED,l=this.journalService.createEntry(this.colonyId,{date:new Date(this.date),type:m,amount:this.harvestAmount});e.push(l)}if(this.storeyAmount){const m=this.storeyAmount>0?u.U.FRAMES_STOREYS_ADDED:u.U.FRAMES_STOREYS_REMOVED,l=this.journalService.createEntry(this.colonyId,{date:new Date(this.date),type:m,amount:this.storeyAmount>0?this.storeyAmount:-this.storeyAmount});e.push(l)}(0,dt.D)(e).subscribe(()=>{this.navCtrl.back(),this.showSuccessToast()})}showSuccessToast(){return(0,b.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:this.translate.instant("FRAMES.onCreationSuccess"),duration:2e3})).present()})}setDate(e){this.date=(0,A.Z)(new Date("string"==typeof e?e:e[0]),_,{locale:Z})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(gt.N),t.Y36(M.gz),t.Y36(s.SH),t.Y36(s.yF),t.Y36(P.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-frames"]],decls:49,vars:33,consts:[[3,"translucent"],["color","primary"],["slot","start"],[3,"routerLink"],["name","arrow-back-outline"],["slot","end"],["menu","first"],["mode","ios",3,"inset"],["position","stacked"],["id","date"],["trigger","date","size","cover"],[4,"ngFor","ngForOf"],["color","primary","name","remove-circle-outline","slot","start",3,"click"],[1,"ion-text-center"],["class","text-muted",4,"ngIf"],[4,"ngIf"],["color","primary","name","add-circle-outline","slot","end",3,"click"],["type","submit",1,"ion-padding-horizontal",3,"click"],["presentation","date","locale","de-DE",3,"max","min","ionChange"],["popoverDate",""],[1,"text-muted"]],template:function(e,a){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),t._UZ(4,"ion-icon",4),t.qZA()(),t.TgZ(5,"ion-title")(6,"strong"),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"ion-buttons",5),t._UZ(10,"ion-menu-button",6),t.qZA()()(),t.TgZ(11,"ion-content")(12,"ion-list",7)(13,"ion-item")(14,"ion-label",8),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"ion-input",9),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"ion-popover",10),t.YNc(21,pt,2,2,"ng-template"),t.qZA()()(),t.TgZ(22,"ion-list",7),t.YNc(23,At,10,6,"ion-item",11),t.ALo(24,"keyvalue"),t.qZA(),t.TgZ(25,"ion-list",7)(26,"ion-item")(27,"ion-icon",12),t.NdJ("click",function(){return a.changeStoreys(-1)}),t.qZA(),t.TgZ(28,"ion-label",13),t._uU(29),t.ALo(30,"translate"),t._UZ(31,"br"),t.YNc(32,_t,3,3,"span",14),t.YNc(33,wt,3,4,"strong",15),t.YNc(34,yt,3,4,"strong",15),t.qZA(),t.TgZ(35,"ion-icon",16),t.NdJ("click",function(){return a.changeStoreys(1)}),t.qZA()()(),t.TgZ(36,"ion-list",7)(37,"ion-item")(38,"ion-icon",12),t.NdJ("click",function(){return a.changeHarvest(-1)}),t.qZA(),t.TgZ(39,"ion-label",13),t._uU(40),t.ALo(41,"translate"),t._UZ(42,"br"),t.YNc(43,Pt,3,3,"span",14),t.YNc(44,Et,2,1,"strong",15),t.qZA(),t.TgZ(45,"ion-icon",16),t.NdJ("click",function(){return a.changeHarvest(1)}),t.qZA()()(),t.TgZ(46,"ion-button",17),t.NdJ("click",function(){return a.save()}),t._uU(47),t.ALo(48,"translate"),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(3),t.Q6J("routerLink","/swarms/view/"+a.colonyId),t.xp6(4),t.Oqu(t.lcZ(8,18,"FRAMES.pageTitle")),t.xp6(5),t.Q6J("inset",!0),t.xp6(3),t.hij(" ",t.lcZ(16,20,"JOURNAL_PAGE.date"),""),t.xp6(3),t.hij("",t.xi3(19,22,a.date,"dd.MM.yyyy")," "),t.xp6(4),t.Q6J("inset",!0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(24,25,a.amounts)),t.xp6(2),t.Q6J("inset",!0),t.xp6(4),t.hij(" ",t.lcZ(30,27,"FRAMES.storeys"),""),t.xp6(3),t.Q6J("ngIf",0===a.storeyAmount),t.xp6(1),t.Q6J("ngIf",a.storeyAmount>0),t.xp6(1),t.Q6J("ngIf",a.storeyAmount<0),t.xp6(2),t.Q6J("inset",!0),t.xp6(4),t.hij(" ",t.lcZ(41,29,"FRAMES.harvest"),""),t.xp6(3),t.Q6J("ngIf",0===a.harvestAmount),t.xp6(1),t.Q6J("ngIf",a.harvestAmount>0),t.xp6(3),t.hij(" ",t.lcZ(48,31,"GENERAL.save")," "))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.YI,M.rH,s.gu,s.wd,s.fG,s.W2,s.q_,s.Ie,s.Q$,s.pK,s.j9,s.d8,s.x4,s.QI,g.sg,g.O5],pipes:[P.X$,g.uU,g.Nd],styles:[".text-muted[_ngcontent-%COMP%]{color:#aaa}"]}),n})()}];let Zt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[M.Bz.forChild(St)],M.Bz]}),n})(),Ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,F.u5,s.Pc,Zt,P.aw]]}),n})()}}]);
//# sourceMappingURL=src_app_pages_swarms_swarm-detail_frames_frames_module_ts.963a46ea92a2bed5.js.map