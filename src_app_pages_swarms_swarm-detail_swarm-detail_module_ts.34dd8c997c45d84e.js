"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["src_app_pages_swarms_swarm-detail_swarm-detail_module_ts"],{1179:(S,_,o)=>{o.r(_),o.d(_,{SwarmDetailPageModule:()=>nt});var r=o(6362),l=o(587),a=o(3444),d=o(5211),f=o(4466),p=o(5513),c=o(4929),w=o(2218),m=o(4350),E=o(2831);function y(n){return s=>s.lift(new v(n))}class v{constructor(s){this.notifier=s}call(s,e){const i=new D(s),u=(0,E.ft)(this.notifier,new E.IY(i));return u&&!i.seenValue?(i.add(u),e.subscribe(i)):i}}class D extends E.Ds{constructor(s){super(s),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var C=o(5670),t=o(6723),T=o(3235),U=o(9896),Z=o(7119),P=o(2912),x=o(6942),A=o(2941),I=o(8133);function M(n,s){if(1&n&&t._UZ(0,"queen-color",9),2&n){const e=t.oxw().ngIf;t.Q6J("year",e.birthYear)}}function b(n,s){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"QUEEN.UNKNOWN")," "))}const B=function(n){return{about:n}};function N(n,s){if(1&n&&(t.TgZ(0,"ion-row")(1,"ion-col",2),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-col",10),t._uU(5),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,3,"COLONIES_PAGE.aboutShort"),":"),t.xp6(2),t.Q6J("ngClass",t.VKq(5,B,e.swarm.about.length>50)),t.xp6(1),t.hij(" ",e.swarm.about," ")}}function R(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-grid",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().editColonyData()}),t.TgZ(1,"ion-row")(2,"ion-col",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-col",3),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-col",4),t._UZ(9,"ion-icon",5),t.qZA()(),t.TgZ(10,"ion-row")(11,"ion-col",2),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ion-col",6),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"ion-row")(18,"ion-col",2),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"ion-col",6),t.YNc(22,M,1,1,"queen-color",7),t.YNc(23,b,3,3,"div",8),t.qZA()(),t.YNc(24,N,6,7,"ion-row",8),t.qZA()}if(2&n){const e=s.ngIf,i=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,8,"COLONIES_PAGE.colonyKind"),": "),t.xp6(3),t.hij(" ",t.lcZ(7,10,i.swarm.isNucleus?"COLONIES_PAGE.nucleus":"COLONIES_PAGE.fullColony")," "),t.xp6(6),t.hij("",t.lcZ(13,12,"QUEEN.race"),": "),t.xp6(3),t.hij(" ",t.lcZ(16,14,"QUEEN."+e.race)," "),t.xp6(4),t.hij("",t.lcZ(20,16,"QUEEN.year"),":"),t.xp6(3),t.Q6J("ngIf",e.birthYear),t.xp6(1),t.Q6J("ngIf",!e.birthYear),t.xp6(1),t.Q6J("ngIf",i.swarm.about)}}let L=(()=>{class n{constructor(e,i){this.queenService=e,this.router=i}ngOnInit(){this.queenStatus$=this.queenService.getStatus(this.swarm.id).pipe((0,x.U)(e=>({race:(null==e?void 0:e.race)||A.m.UNKNOWN,birthYear:null==e?void 0:e.birthYear})))}editColonyData(){this.router.navigateByUrl(`/swarms/edit/${this.swarm.id}`)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A.F),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["colony-details-card"]],inputs:{swarm:"swarm"},decls:2,vars:3,consts:[[3,"click",4,"ngIf"],[3,"click"],["size","3"],["size","8"],["size","1"],["name","create-outline","size","lg"],["size","9"],[3,"year",4,"ngIf"],[4,"ngIf"],[3,"year"],["size","9",3,"ngClass"]],template:function(e,i){1&e&&(t.YNc(0,R,25,18,"ion-grid",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.queenStatus$))},directives:[r.O5,I.C,r.mk],pipes:[r.Ov,d.X$],styles:[".about[_ngcontent-%COMP%]{font-size:smaller}"]}),n})();var J=o(4437),F=o(8184),G=o(2599),W=o(2773);function Y(n,s){if(1&n&&t._UZ(0,"colony-details-card",29),2&n){const e=t.oxw();t.Q6J("swarm",e.swarm)}}function j(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-reminder-item",31),t.NdJ("notifyChange",function(){return t.CHM(e),t.oxw(2).loadReminders()}),t.qZA()}2&n&&t.Q6J("reminder",s.$implicit)}function Q(n,s){if(1&n&&(t.TgZ(0,"ion-list",10),t.YNc(1,j,1,1,"app-reminder-item",30),t.qZA()),2&n){const e=t.oxw();t.Q6J("inset",!0),t.xp6(1),t.Q6J("ngForOf",e.reminders)}}function $(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-label",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit;return t.oxw().editJournalEntry(u.id)}),t.TgZ(1,"strong"),t._uU(2),t.ALo(3,"date"),t.qZA(),t._UZ(4,"app-journal-entry-short",33),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij("",t.xi3(3,2,e.date,"dd. MMM"),": "),t.xp6(2),t.Q6J("entry",e)}}function q(n,s){if(1&n&&(t.TgZ(0,"ion-item"),t.YNc(1,$,5,5,"ion-label",32),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.type)}}function H(n,s){1&n&&(t.TgZ(0,"ion-item")(1,"i"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"JOURNAL_PAGE.noTrackedActivity")))}const z=function(){return{type:"varroa"}},V=function(){return{type:"queen"}},K=function(){return{type:"other"}},k=function(n){return{swarmId:n}},O=Array(3).fill({text:"",date:new Date}),X=[{path:"",component:(()=>{class n{constructor(e,i,u,h,g,et,ot,it,rt,st,at){this.swarmService=e,this.journalService=i,this.route=u,this.loadingCtrl=h,this.alertCtrl=g,this.reminderService=et,this.toastController=ot,this.router=it,this.translate=rt,this.swarmGroupService=st,this.actionSheetController=at,this.journalEntries=O,this.destroyed$=new w.xQ,this.now=new Date}ionViewWillEnter(){this.swarmId=this.route.snapshot.params.swarmId,this.userId=this.route.snapshot.data.userId,this.loadData(!this.journalEntries||0===this.journalEntries.length)}loadData(e=!0){return(0,c.mG)(this,void 0,void 0,function*(){const i=yield this.loadingCtrl.create({message:this.translate.instant("JOURNAL_PAGE.loading"),showBackdrop:!0});e&&(yield i.present()),this.swarmService.getSwarm(this.swarmId).pipe(y(this.destroyed$)).subscribe(u=>{this.swarm=u}),this.journalService.getEntries(this.swarmId,{limit:O.length}).pipe(y(this.destroyed$)).subscribe(u=>{this.journalEntries=u,e&&i.dismiss()}),this.loadReminders()})}loadReminders(){this.reminderService.getReminders(this.swarmId).pipe((0,C.P)()).subscribe(e=>{this.reminders=e})}markAsDeceased(){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertCtrl.create({header:this.translate.instant("COLONIES_PAGE.closeColonyHeader"),message:this.translate.instant("COLONIES_PAGE.closeColonyBody"),buttons:[{text:this.translate.instant("COLONIES_PAGE.markAsDeceased"),cssClass:"danger",handler:()=>(0,c.mG)(this,void 0,void 0,function*(){this.swarmService.markAsDeceased(this.swarm).subscribe(()=>{this.router.navigateByUrl("/")}),this.showWhereToFindHint()})},{text:this.translate.instant("COLONIES_PAGE.markAsDissolved"),cssClass:"danger",handler:()=>(0,c.mG)(this,void 0,void 0,function*(){this.swarmService.markAsDissolved(this.swarm).subscribe(()=>{this.router.navigateByUrl("/")}),this.showWhereToFindHint()})},{text:this.translate.instant("COLONIES_PAGE.markAsSold"),cssClass:"danger",handler:()=>(0,c.mG)(this,void 0,void 0,function*(){this.swarmService.markAsSold(this.swarm).subscribe(()=>{this.router.navigateByUrl("/")}),this.showWhereToFindHint()})},{text:this.translate.instant("GENERAL.cancel"),role:"cancel"}]})).present()})}showWhereToFindHint(){return(0,c.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:this.translate.instant("COLONIES_PAGE.whereToFindExColoniesHint"),duration:6e3})).present()})}changeGroup(){this.swarmGroupService.getGroups().pipe((0,C.P)()).subscribe(e=>(0,c.mG)(this,void 0,void 0,function*(){(yield this.actionSheetController.create({header:this.translate.instant("COLONIES_PAGE.changeGroupSelect"),buttons:e.map(u=>({text:u.name,handler:()=>{this.moveToGroup(e,u.id)}}))})).present()}))}moveToGroup(e,i){let u,h;for(let g of e)g.swarmIds&&g.swarmIds.indexOf(this.swarmId)>-1&&(u=g),g.id===i&&(h=g);u.id!==h.id&&(u.swarmIds=u.swarmIds.filter(g=>g!==this.swarmId),h.swarmIds?h.swarmIds.push(this.swarmId):h.swarmIds=[this.swarmId],(0,m.D)([this.swarmGroupService.updateGroup(u),this.swarmGroupService.updateGroup(h)]).subscribe(()=>{this.router.navigateByUrl("/swarms")}))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}editJournalEntry(e){this.router.navigateByUrl(`/swarms/view/${this.swarmId}/journal/edit?entryId=${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.e),t.Y36(U.N),t.Y36(p.gz),t.Y36(a.HT),t.Y36(a.Br),t.Y36(Z.Z),t.Y36(a.yF),t.Y36(p.F0),t.Y36(d.sK),t.Y36(P.N),t.Y36(a.BX))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-swarm-detail"]],decls:43,vars:25,consts:[[3,"translucent"],["color","primary"],["slot","start"],[3,"routerLink"],["name","arrow-back-outline"],["slot","end"],["menu","first"],["mode","ios",1,"detailsCard",3,"inset"],[3,"swarm",4,"ngIf"],["mode","ios",3,"inset",4,"ngIf"],["mode","ios",3,"inset"],[1,"ion-text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],["routerLink","journal"],[1,"controls-container"],[1,"ion-padding-horizontal"],["routerLink","journal/edit",1,"imgbutton",3,"queryParams"],["size","lg","color","white"],["routerLink","frames",1,"imgbutton"],["name","git-compare-outline"],["color","primary","routerLink","journal/edit",3,"queryParams"],["name","ellipsis-horizontal-outline"],[3,"routerLink","queryParams"],["name","alarm-outline"],[3,"click"],["name","exit-outline"],["color","danger",3,"click"],["name","close-circle-outline"],[3,"swarm"],[3,"reminder","notifyChange",4,"ngFor","ngForOf"],[3,"reminder","notifyChange"],[3,"click",4,"ngIf"],[3,"entry"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),t._UZ(4,"ion-icon",4),t.qZA()(),t.TgZ(5,"ion-title")(6,"strong"),t._uU(7),t.qZA()(),t.TgZ(8,"ion-buttons",5),t._UZ(9,"ion-menu-button",6),t.qZA()()(),t.TgZ(10,"ion-content")(11,"ion-list",7),t.YNc(12,Y,1,1,"colony-details-card",8),t.qZA(),t.YNc(13,Q,2,2,"ion-list",9),t.TgZ(14,"ion-list",10)(15,"ion-item",11)(16,"ion-label")(17,"strong"),t._uU(18),t.ALo(19,"translate"),t.qZA()()(),t.YNc(20,q,2,1,"ion-item",12),t.YNc(21,H,4,3,"ion-item",13),t.TgZ(22,"ion-item",14)(23,"ion-label"),t._uU(24),t.ALo(25,"translate"),t.qZA()()(),t.TgZ(26,"div",15)(27,"ion-buttons",16)(28,"ion-fab-button",17),t._UZ(29,"mite"),t.qZA(),t.TgZ(30,"ion-fab-button",17),t._UZ(31,"crown",18),t.qZA(),t.TgZ(32,"ion-fab-button",19),t._UZ(33,"ion-icon",20),t.qZA(),t.TgZ(34,"ion-fab-button",21),t._UZ(35,"ion-icon",22),t.qZA()(),t.TgZ(36,"ion-buttons",16)(37,"ion-fab-button",23),t._UZ(38,"ion-icon",24),t.qZA(),t.TgZ(39,"ion-fab-button",25),t.NdJ("click",function(){return i.changeGroup()}),t._UZ(40,"ion-icon",26),t.qZA(),t.TgZ(41,"ion-fab-button",27),t.NdJ("click",function(){return i.markAsDeceased()}),t._UZ(42,"ion-icon",28),t.qZA()()()()),2&e&&(t.Q6J("translucent",!0),t.xp6(3),t.Q6J("routerLink","/swarms"),t.xp6(4),t.Oqu(null==i.swarm?null:i.swarm.name),t.xp6(4),t.Q6J("inset",!0),t.xp6(1),t.Q6J("ngIf",i.swarm),t.xp6(1),t.Q6J("ngIf",(null==i.reminders?null:i.reminders.length)>0),t.xp6(1),t.Q6J("inset",!0),t.xp6(4),t.Oqu(t.lcZ(19,16,"JOURNAL_PAGE.latestActivity")),t.xp6(2),t.Q6J("ngForOf",i.journalEntries),t.xp6(1),t.Q6J("ngIf",i.journalEntries&&0===i.journalEntries.length),t.xp6(3),t.Oqu(t.lcZ(25,18,"JOURNAL_PAGE.viewJournal")),t.xp6(4),t.Q6J("queryParams",t.DdM(20,z)),t.xp6(2),t.Q6J("queryParams",t.DdM(21,V)),t.xp6(4),t.Q6J("queryParams",t.DdM(22,K)),t.xp6(3),t.Q6J("routerLink","/reminders")("queryParams",t.VKq(23,k,null==i.swarm?null:i.swarm.id)))},directives:[a.Gu,a.sr,a.Sm,a.YG,a.YI,p.rH,a.gu,a.wd,a.fG,a.W2,a.q_,r.O5,L,r.sg,J.s,a.Ie,a.Q$,F.S,a.W4,G.dX,W.d],pipes:[d.X$,r.uU],styles:["ion-button.imgbutton[_ngcontent-%COMP%]{height:100px}ion-fab-button[_ngcontent-%COMP%]{margin:5px}.reminder[_ngcontent-%COMP%]{font-size:smaller;line-height:normal;word-break:normal}.deleteHiveButton[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:15px}"]}),n})()},{path:"journal",loadChildren:()=>Promise.all([o.e("default-node_modules_date-fns_esm_format_index_js"),o.e("common"),o.e("src_app_pages_swarms_swarm-journal_swarm-journal_module_ts")]).then(o.bind(o,9805)).then(n=>n.SwarmJournalPageModule)},{path:"frames",loadChildren:()=>Promise.all([o.e("default-node_modules_date-fns_esm_format_index_js"),o.e("common"),o.e("src_app_pages_swarms_swarm-detail_frames_frames_module_ts")]).then(o.bind(o,9339)).then(n=>n.FramesPageModule)}];let tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(X)],p.Bz]}),n})(),nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,l.u5,a.Pc,tt,d.aw,f.m]]}),n})()},2773:(S,_,o)=>{o.d(_,{d:()=>l});var r=o(6723);let l=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(f){return new(f||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["crown"]],decls:1,vars:0,consts:[["src","assets/img/crown.png",1,"filterWhite"]],template:function(f,p){1&f&&r._UZ(0,"ion-img",0)},styles:[".filterWhite[_ngcontent-%COMP%]{width:30px;height:30px;filter:saturate(100%) brightness(100%) invert(100%)}"]}),a})()},8184:(S,_,o)=>{o.d(_,{S:()=>p});var r=o(1972),l=o(6723),a=o(5211),d=o(6362);function f(c,w){if(1&c&&(l.TgZ(0,"div",2),l._uU(1),l.qZA()),2&c){const m=l.oxw();l.xp6(1),l.hij("(",m.amountWithUnit,")")}}let p=(()=>{class c{constructor(m){this.translate=m}ngOnInit(){const m=r.U.get(this.entry.type);m&&(this.entry.amount||0===this.entry.amount)&&(this.amountWithUnit=1===this.entry.amount?`1 ${this.translate.instant("UNIT."+m.unitSingular)}`:`${this.entry.amount} ${this.translate.instant("UNIT."+m.unit)}`)}}return c.\u0275fac=function(m){return new(m||c)(l.Y36(a.sK))},c.\u0275cmp=l.Xpm({type:c,selectors:[["app-journal-entry-short"]],inputs:{entry:"entry"},decls:4,vars:4,consts:[[1,"type"],["class","amount",4,"ngIf"],[1,"amount"]],template:function(m,E){1&m&&(l.TgZ(0,"div",0),l._uU(1),l.ALo(2,"translate"),l.qZA(),l.YNc(3,f,2,1,"div",1)),2&m&&(l.xp6(1),l.Oqu(l.lcZ(2,2,"ACTIONS."+E.entry.type)),l.xp6(2),l.Q6J("ngIf",E.amountWithUnit))},directives:[d.O5],pipes:[a.X$],styles:["[_nghost-%COMP%]{font-size:smaller}.type[_ngcontent-%COMP%]{margin-right:5px;display:inline}.amount[_ngcontent-%COMP%]{display:inline;white-space:nowrap}\n/*# sourceMappingURL=journal-entry-short.component.css.map*/"]}),c})()},1972:(S,_,o)=>{o.d(_,{U:()=>l});var r=o(8079);const l=new Map([[r.U.VARROA_CHECK_END,{lowerBound:1,upperBound:200,stepWidth:1,unit:"mites",unitSingular:"mite"}],[r.U.FOOD_ADDED,{lowerBound:.5,upperBound:20,stepWidth:.5,unit:"kg",unitSingular:"kg"}],[r.U.WEIGHT_MEASURED,{lowerBound:5,upperBound:80,stepWidth:1,unit:"kg",unitSingular:"kg"}],[r.U.FRAMES_BROOD_COUNTED,{lowerBound:.5,upperBound:20,stepWidth:.5,unit:"combs",unitSingular:"comb"}],[r.U.FRAMES_EMPTY_PANEL_INSERTED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"panels",unitSingular:"panel"}],[r.U.FRAMES_EMPTY_PANEL_REMOVED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"panels",unitSingular:"panel"}],[r.U.FRAMES_HONEY_HARVESTED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"kg",unitSingular:"kg"}],[r.U.FRAMES_DRONE_INSERTED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"frames",unitSingular:"frame"}],[r.U.FRAMES_DRONE_REMOVED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"frames",unitSingular:"frame"}],[r.U.FRAMES_EMPTY_COMBS_INSERTED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"combs",unitSingular:"comb"}],[r.U.FRAMES_EMPTY_COMBS_REMOVED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"combs",unitSingular:"comb"}],[r.U.FRAMES_BROOD_INSERTED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"combs",unitSingular:"comb"}],[r.U.FRAMES_BROOD_REMOVED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"combs",unitSingular:"comb"}],[r.U.FRAMES_FOOD_INSERTED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"combs",unitSingular:"comb"}],[r.U.FRAMES_FOOD_REMOVED,{lowerBound:1,upperBound:20,stepWidth:1,unit:"combs",unitSingular:"comb"}],[r.U.FRAMES_STOREYS_ADDED,{lowerBound:1,upperBound:3,stepWidth:1,unit:"storeys",unitSingular:"storey"}],[r.U.FRAMES_STOREYS_REMOVED,{lowerBound:1,upperBound:3,stepWidth:1,unit:"storeys",unitSingular:"storey"}],[r.U.GOT_STUNG,{lowerBound:1,upperBound:20,stepWidth:1,unit:"stings",unitSingular:"sting"}],[r.U.QUEEN_CELL_SPOTTED,{lowerBound:1,upperBound:10,stepWidth:1,unit:"cells",unitSingular:"cell"}],[r.U.QUEEN_CELL_REMOVED,{lowerBound:1,upperBound:10,stepWidth:1,unit:"cells",unitSingular:"cell"}]])}}]);
//# sourceMappingURL=src_app_pages_swarms_swarm-detail_swarm-detail_module_ts.34dd8c997c45d84e.js.map